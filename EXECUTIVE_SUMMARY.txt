ORGANISM SURVIVAL INVESTIGATION - EXECUTIVE SUMMARY
==================================================

QUESTION:
Why do organisms in this simulation die off around tick 3000 and fail to improve over generations?

ANSWER:
The simulation has five critical systematic issues that cause inevitable population collapse:

ISSUE #1: REPRODUCTION BOTTLENECK (HIGH SEVERITY)
- Organisms need 600 energy to reproduce but offspring get only 500
- Parent must spend 500 to produce a 500-energy offspring (net loss of control)
- Recovery from reproduction takes 200+ ticks of perfect foraging
- Result: Organisms avoid reproduction; only 0-3 offspring per organism instead of 5-15

ISSUE #2: MISALIGNED FITNESS WEIGHTS (HIGH SEVERITY) 
- Fitness formula weights offspring at 100x (too high)
- Producing 11 offspring requires 5500+ energy from 1000 starting supply
- Mathematically impossible to achieve within timeframe
- Result: Selection pressure favors energy hoarding, not reproduction or innovation

ISSUE #3: DELAYED SELECTION PRESSURE (MEDIUM SEVERITY)
- Server only applies selection when 20+ lineages exist
- Only 10 initial organisms provided  
- First 1000+ ticks: pure random drift, no evolution
- Result: Evolution doesn't begin until halfway through simulation

ISSUE #4: LOCAL RESOURCE DEPLETION (HIGH SEVERITY)
- Population grows exponentially from tick 0-500
- Resources regenerate at only 5% logistic rate
- Around tick 1000-2000: local areas become depleted
- By tick 2000-3000: starvation becomes primary death mode
- Result: Inevitable population crash around tick 3000

ISSUE #5: INSUFFICIENT GENETIC DIVERSITY (MEDIUM SEVERITY)
- Low reproduction rate = few mutation events
- Only 5-10 offspring in 10,000-tick run
- Mutations mostly random and deleterious  
- Result: Organisms are clones of early successful lineages

THE TIMELINE:
Tick 0-500:   BOOM - Population grows 10→900, abundant resources
Tick 500-2000: TRANSITION - Pop caps at 1000, local depletion accelerates  
Tick 2000-3000: COLLAPSE - Population crashes 1000→300, starvation
Tick 3000+:   EXTINCTION - Too few organisms to recover

WHY TICK 3000?
The collapse happens around tick 3000 because:
1. Population boom (0-500) saturates all nearby resources
2. Organisms forced to travel farther to eat
3. Movement costs + basal metabolism = net energy loss for most organisms
4. Resource regeneration cannot keep pace with consumption
5. Reproduction nearly halts (requires 600 energy, organisms barely survive)
6. Without reproduction, no genetic diversity, no evolution
7. Population crashes from mass starvation and bad luck

ENERGY ECONOMY SUMMARY:
Starting energy:         1000
Basal cost/tick:            1
Move cost:                  5
Eat max gain:              80
Reproduce cost:           500
Offspring energy:         500
Min reproduction energy:  600

With this economy:
- Can survive ~1000 ticks on stored energy alone
- Net energy from eating: +75 (100 food x 0.8 = 80 minus 5 movement)
- Must eat every 13 ticks just to break even on basal cost
- Reproduction requires unsustainable energy accumulation

RECOMMENDED FIXES (IN ORDER OF IMPACT):

1. REDUCE REPRODUCTION COST
   File: crates/evo-core/src/config.rs:70
   Change: 500 → 200-300
   Effect: 2-3x more offspring, faster evolution

2. LOWER REPRODUCTION THRESHOLD
   File: crates/evo-core/src/config.rs:72  
   Change: 600 → 300-400
   Effect: Easier to breed, smaller recovery gap

3. INCREASE FOOD VALUE
   File: crates/evo-core/src/config.rs:71
   Change: 0.8 → 1.2-1.5
   Effect: More energy per food, reproduction sustainable

4. INCREASE STARTING ENERGY
   File: crates/evo-core/src/config.rs:65
   Change: 1000 → 2000
   Effect: Longer survival window, more time for adaptation

5. INCREASE RESOURCE REGENERATION
   File: crates/evo-core/src/config.rs:17
   Change: 0.05 → 0.15-0.20
   Effect: Less local depletion, sustains larger population

BONUS FIX:
6. START WITH MORE ORGANISMS
   File: crates/evo-server/src/evolution.rs:40
   Change: 10 → 50-100
   Effect: More genetic diversity from day 1

INVESTIGATION DOCUMENTS PROVIDED:
1. INVESTIGATION_INDEX.md (282 lines)
   - Master index of all findings
   - Quick reference guide
   - Next steps

2. SURVIVAL_ANALYSIS.md (450 lines)
   - Detailed deep dive on all 6 investigation areas
   - Complete code snippets
   - Full explanation of each issue

3. MECHANICS_REFERENCE.md (252 lines)
   - Visual diagrams and timelines
   - Energy flow charts
   - Population dynamics graphs
   - Five adjustable knobs

4. CODE_REFERENCE.md (395 lines)
   - Exact file paths and line numbers
   - All relevant code sections
   - Change summary table
   - Where to make modifications

All documents include absolute file paths for easy code verification.

NEXT STEPS:
1. Read INVESTIGATION_INDEX.md for overview
2. Read SURVIVAL_ANALYSIS.md for detailed explanations
3. Check CODE_REFERENCE.md for exact locations
4. Apply the five recommended fixes
5. Test with logging to verify improvements
6. Monitor population timeline, reproduction rate, and fitness improvement

KEY METRICS TO MONITOR:
- Population at tick 1000, 2000, 3000
- Reproduction success rate (% of organisms reaching 600 energy)
- Average offspring per organism (should be 5-15+)
- Fitness improvement over time
- % deaths from starvation vs old age
- Resource depletion patterns

CONCLUSION:
The simulation is designed in a way that makes reproduction energetically unfavorable 
and resources locally depletable. This creates an unintentional trap where:
- Early reproduction is high (abundant resources) but random mutations 
- Mid-simulation selection pressure is weak (too few lineages)
- Late simulation starvation is inevitable (depleted local resources)
- Result: Population crash around tick 3000, zero meaningful evolution

The fix requires rebalancing the energy economy to make reproduction sustainable
and resources regenerate faster than consumption.
